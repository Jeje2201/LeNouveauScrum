<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">
		
        <h3>Fiche De Temps</h3>
        <p>Vous avez le sentiment qu'avec les fiches de temps vous êtes surveillé et contrôlé ? Voici pour vous <a href="https://www.planzone.fr/blog/raisons-aimer-feuilles-de-temps">3 raisons d'aimer les feuilles de temps</a>.</p>

        <div class="form-group">
          <label>Projet</label>
          <div name="ListProjet" id="ListProjet"> </div>
        </div>

        <div class="form-group">
          <label>Jours de travail ( 0 ou 0,5 ou 1 )</label>
          <input type="number" class="form-control" id="Time" value="0" step="0.5" max="1" min="0">
        </div>

        <div class="form-group">
          <label>Date</label>
          <input type="text" class="form-control" id="Done">
        </div>
        
        <button class="btn btn-primary" id="SetFicheDeTemps">Envoyer</button>

    </div>
  </div>

  <script>
    $(document).ready(function () {

      RequeteAjax('ListProjet', 'ListeDeroulanteProjet', 'Modele/RequetesAjax.php');

      if(!localStorage.getItem("Connexion")){
        $('.container-fluid').html("<h1>Erreur de cache</h1>Je ne reconnais pas qui tu es. Peut-tu te connecter à nouveau en cliquand <a href='Modele/ConnectionLogout.php'>ICI</a> ?")
        }

      $('#Done').val(ChoixDate(0));
      $('#Done').datetimepicker({format: 'dd-mm-yyyy', autoclose: true, minView: 2});

      SetSelect2('#projetId');

        $('#SetFicheDeTemps').click(function () {
          
            if($('#Time').val() == 0 || $('#Time').val() == 0.5 || $('#Time').val() == 1)
              $.ajax({
                url: "Modele/FicheDeTemps.php",
                method: "POST",
                data: {
                  action: "Create",
                  Ressource: localStorage.getItem("Connexion"),
                  Projet: $('#projetId').val(),
                  Time: $('#Time').val(),
                  Done: DateFrToEn($('#Done').val()),
                  Log: DateFrToEn(ChoixDate(0))           
                },
                success: function (data) {
                  BootstrapAlertDefaut(data);
                }
              });
          else
            BootstrapAlertError('Il est pourtant bien indiqué que le nombre d\'heure est soit 0 soit 0,5 soit 1')
      });
    });
    
  </script>