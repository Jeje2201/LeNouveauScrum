<div id="BackGround" class="ImageLogin"></div>
<div class="PageConnexion">

  <div class="card card-login mx-auto mt-5">
    <div class="card-header">
      <h3 class="text-center">Connexion</h3>
    </div>
    <div class="card-body">

      <div id="ListeEmploye"></div>
      <input type="text" name="EmployeLogin" id="EmployeLogin" class="form-control" placeholder="Email NS" required="required">
      <br>
      <div class="form-label-group">
        <input type="password" name="inputPassword" id="inputPassword" class="form-control" placeholder="Mot de passe" minlength="5" required="required">
        <small id="wrongpassword" class="form-text text-hide text-danger">Non, je suis sûr que ce n'est pas le bon, essaie encore ¯\_(ツ)_/¯</small>
      </div>
      <br>
      <button class="btn btn-primary btn-block" id="Log">Connexion</button>
      <div class="text-center">
        <hr>
        <a class="d-block small mt-3 text-primary" id="target" style="cursor:pointer">
          <u>Je n'apparais pas dans la liste..</u>
        </a>
      </div>
    </div>
  </div>
</div>
<div id="ModalLogin" class="modal fade">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">World 1 - Level 1</h4>
      </div>
      <div class="modal-body">
        <p>
          N'apparait dans la liste que les ressources qui :
          <li>Sont enregistrées dans la base de données</li>
          <li>Sont définies en tant qu'actifs</li>
          Si ce n'est pas ton cas, un Scrum Master peux résoudre ça.
        </p>

        <img src="https://i.imgflip.com/2wxesf.jpg" width="100%"></img>
      </div>
    </div>
  </div>
</div>

<script>
  $(document).ready(function () {

    //Show modal if click on help
    $("#target").click(function () {
      $('#ModalLogin').modal('show');
    });

    //fonction pour se connecter, trigger quand log on ou press enter
    function SeConnecter() {
      $.ajax({
        url: "Modele/ConnectionLogin.php",
        method: "POST",
        dataType: "json",
        data: {
          inputPassword: $('#inputPassword').val(),
          EmployeLogin: $('#EmployeLogin').val()
        },
        success: function (data) {
          if (data.Connexion) {
            location.reload();
          } else {
            $("#wrongpassword").removeClass("text-hide");
            $("#inputPassword")
              .addClass("is-invalid")
              .effect("shake");
          }
        }
      });
    }

    //Lors du click sur connexion
    $('#Log').click(function () {
      SeConnecter()
    });

    $(document).keypress(function (event) {
      var keycode = (
        event.keyCode
        ? event.keyCode
        : event.which);
      if (keycode == '13') {
        SeConnecter()
      }
    });

  });
</script>