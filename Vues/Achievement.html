<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid ">
      <div class="alert alert-danger alert-dismissible">
        <button type="button" class="close" data-dismiss="alert">&times;</button>
        <strong>En cours de développement!</strong>
        Voici un avant gout.. (づ￣ 3￣)づ
      </div>
      <label>Condition:
      </label>
      <input class="form-control" id="Condition" disabled="disabled" value="Survoler un trophé pour obtenir sa condition">
      <p>&nbsp;</p>
      <div class="row centered">

        <div class="col">
          <img id="Conge" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Avoir un total de plus de 30j de congés">
          <p>Yes, we can'd</p>
        </div>

        <div class="col">
          <img id="NotreProjet" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Avoir plus de 48h passées au total sur un projet">
          <p>PARCE QUE C'EST NOTRE PROJET</p>
        </div>

        <div class="col">
          <img id="Objectif" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Avoir plus de 50 objectifs 'OK'">
          <p>Sssplendide !!</p>
        </div>

        <div class="col">
          <img id="Interference" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Avoir plus de 30h d'interférence sur 1 sprint">
          <p>Interférence</p>
        </div>

        <div class="col">
          <img id="TacheValides" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Avoir plus de 100 tâches validées">
          <p>ergr</p>
        </div>

        <div class="col">
          <img id="CouleurCustom" class="TrophePasEncore" src="Assets/Image/achievement.png" text="Changer la couleur de base de ses tâches">
          <p>Pimp my tâche</p>
        </div>

        <div class="col">
          <img id="Ancien" class="TrophePasEncore" src="Assets/Image/achievement.png" text="?">
          <p>?</p>
        </div>

        <div class="col">
          <img id="Ancien" class="TrophePasEncore" src="Assets/Image/achievement.png" text="?">
          <p>?</p>
        </div>

        <div class="col">
          <img id="Ancien" class="TrophePasEncore" src="Assets/Image/achievement.png" text="?">
          <p>?</p>
        </div>

        <div class="col">
          <img id="Ancien" class="TrophePasEncore" src="Assets/Image/achievement.png" text="?">
          <p>?</p>
        </div>

      </div>
      <hr>
      <p></p>
      <h3 class="centered">Leaderboard (Top 5)</h3>
      
      <div class="row centered">

        <div class="col">
          <div id="table1"></div>
        </div>
        <div class="col">
          <div id="table2"></div>
        </div>
        <div class="col">
          <div id="table3"></div>
        </div>
        <div class="col">
          <div id="table4"></div>
        </div>
        <div class="col">
          <div id="table5"></div>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  $(document).ready(function () {

    //Si hover une image, afficher la condition
    $('img').mouseenter(function () {
      $('#Condition').val($(this).attr('text'))
    })

    //phase de test
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      dataType: "json",
      data: {
        action: 'Trophee',
        idRessource: localStorage.getItem("Connexion")
      },
      success: function (data) {
        console.log('Liste: ', data)

        //Objectif 30j congé
        if (data[0] == "1") 
          $('#Conge').removeClass('TrophePasEncore')

        //Objectif +48h total sur un projet
        if (data[1] == "1") 
          $('#NotreProjet').removeClass('TrophePasEncore')

        //Objectif +50 objectifs rétro 'ok'
        if (data[2] == "1") 
          $('#Objectif').removeClass('TrophePasEncore')

        //Objectif +30h interference
        if (data[3] == "1") 
          $('#Interference').removeClass('TrophePasEncore')
            
        //Objectif +100 taches validees
        if (data[4] == "1") 
          $('#TacheValides').removeClass('TrophePasEncore')
      }
    });

    /////////////////////////////////////////////////////////

    //Jours de congés
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      data: {
        action: 'LeaderboardConge'
      },
      success: function (data) {
        console.log('Info: ', data)
        $('#table1').html(data);
        // $('#table2').html(data);
      }
    });

    //Jours de congés
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      data: {
        action: 'LeaderboardObjectif'
      },
      success: function (data) {
        $('#table2').html(data);
      }
    });

    //Tot par projets
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      data: {
        action: 'LeaderboardTotProjet'
      },
      success: function (data) {
        $('#table3').html(data);
      }
    });

    //Tot taches validess
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      data: {
        action: 'LeaderboardTacheValide'
      },
      success: function (data) {
        $('#table4').html(data);
      }
    });
    
    //tot interference sur un sprint
    $.ajax({
      url: "Modele/Achievement.php",
      method: "POST",
      data: {
        action: 'LeaderboardInterference'
      },
      success: function (data) {
        $('#table5').html(data);
      }
    });

  });
</script>