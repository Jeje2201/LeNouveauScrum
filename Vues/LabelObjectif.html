<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">

      <div class="row">
        <div class="col-lg-6">
          <div id="ListSrint"></div>
        </div>
        <div class="col-lg-6">
          <button type="button" class="btn btn-block btn-success">Tout mettre Ã  jour</button>
        </div>
      </div>
      <p></p>
      <div class="row">
        <div class="col-lg-12">
          <div id="TableObjectif" class="table-responsive table-striped table-hover"></div>
        </div>
      </div>

    </div>
  </div>
</body>

<script>
  $(document).ready(function () {

    RequeteAjax('ListSrint', 'ListeDeroulanteSprint', 'Modele/RequetesAjax.php');

    RemplirTableau();

    $('#ListSrint').change(function () {
      RemplirTableau();
    });

    function RemplirTableau() {
      $.ajax({
        url: "Modele/LabelTache.php",
        method: "POST",
        data: {
          action: "Load",
          idSprint: $("#numeroSprint").val(),
          idEmploye: localStorage.getItem("Connexion")
        },
        success: function (data) {
          $('#TableObjectif').html(data);
        }
      });
    }

    $(document).on('click', '.btn', function () {

      var ToReturn = new Array();
      $("input[type=text]").each(function () {
        if ($(this).val() != "") {
          var UnLabel = new Array();
          UnLabel.push(parseInt($(this).attr('id')))
          UnLabel.push($(this).val().replace(/\"/g, ""))
          ToReturn.push(UnLabel)
        }

      });

      $.ajax({
        url: "Modele/LabelTache.php",
        method: "POST",
        data: {
          action: "Changer",
          ToReturn: ToReturn
        },
        success: function (data) {
          $.notify(data, "success");
          RemplirTableau();
        }
      });
    });

  });
</script>