<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">

      <div class="row">
        <div class="col-lg-12">
          <button type="button" class="btn btn-success">
            <i class="fa fa-check" aria-hidden="true"></i> Tout mettre à jour!</button>
        </div>
      </div>
      <p></p>
      <div class="row">
        <div class="col-lg-12">
          <div id="TableObjectif" class="table-responsive table-striped table-hover"></div>
        </div>
      </div>

    </div>
  </div>
</body>

<script>

  $(document).ready(function () {

    if (!localStorage.getItem("Connexion")) {
      $('.container-fluid').html("<h1>Erreur de cache</h1>Je ne reconnais pas qui tu es. Peut-tu te connecter à nouveau en cliquand <a href='Modele/ConnectionLogout.php'>ICI</a> ?")
    }

    RemplirTableau();

    function RemplirTableau() {
      $.ajax({
        url: "Modele/LabelTache.php",
        method: "POST",
        data: {
          action: "Load",
          idEmploye: localStorage.getItem("Connexion")
        },
        success: function (data) {
          $('#TableObjectif').html(data);
        }
      });
    }

    $(document).on('click', '.btn', function () {

      var ToReturn = new Array();
      $("input[type=text]").each(function () {
        if ($(this).val() != "") {
          var UnLabel = new Array();
          UnLabel.push(parseInt($(this).attr('id')))
          UnLabel.push($(this).val().replace(/\"/g, ""))
          ToReturn.push(UnLabel)
        }

      });

      $.ajax({
        url: "Modele/LabelTache.php",
        method: "POST",
        data: {
          action: "Changer",
          ToReturn: ToReturn
        },
        success: function (data) {
          BootstrapAlertDefaut(data);
          RemplirTableau();
        }
      });
    });

  });
</script>