<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">

      <div class="row">
        <div class="col-lg-12">
          <button type="button" class="btn btn-success">
            <i class="fa fa-check" aria-hidden="true"></i> Tout mettre Ã  jour!</button>
        </div>
      </div>
      <p></p>
      <div class="row">
        <div class="col-lg-12">
          <div id="TableObjectif" class="table-responsive table-striped table-hover"></div>
        </div>
      </div>

    </div>
  </div>
</body>

<script>

  $(document).ready(function () {

    RemplirTableau();

    function RemplirTableau() {
      var idEmploye = localStorage.getItem("Connexion");
      var action = "Load";
      $.ajax({
        url: "Modele/ActionLabelTache.php",
        method: "POST",
        data: { action: action, idEmploye: idEmploye },
        success: function (data) {
          $('#TableObjectif').html(data);
        }
      });
    }

    $(document).on('click', '.btn', function () {

      var ToReturn = new Array();
      $("input[type=text]").each(function () {
        if ($(this).val() != "") {
          var UnLabel = new Array();
          UnLabel.push(parseInt($(this).attr('id')))

          UnLabel.push($(this).val().replace(/\"/g, ""))
          ToReturn.push(UnLabel)
        }

      });
      console.log(ToReturn)
      var action = "Changer";
      $.ajax({
        url: "Modele/ActionLabelTache.php",
        method: "POST",
        data: { action: action, ToReturn: ToReturn },
        success: function (data) {
          BootstrapAlert(data);
          RemplirTableau();
        }
      });
    });

  });
</script>