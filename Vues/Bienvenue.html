<body class="fixed-nav sticky-footer" id="page-top">
  <div class="content-wrapper">
    <div class="container-fluid">

      <h2 class="text-center mb-4">
        <u>Bienvenue à Natural Solutions</u>
        <br>
        <u><?php print($_SESSION['user']['prenom'] . " " .  $_SESSION['user']['nom'])?></u>
      </h2>

      <h4>Adresse mail</h4>
      <hr class="mb-2">
      <p>En arrivant à Natural Solutions, tu obtiens un compte google professionel doté d'une adresse mail qui se compose de ton prénom et nom sans majuscule ou accent : prenom_nom@natural-solutions.eu </p>

      <h4>Communication</h4>
      <hr class="mb-2">
      <p>Nous utilisons Skype pour communiquer.</p>
      <p>Tu peux utiliser l'adresse mail fournie par Natural Solutions pour te créer un compte.</p>
      <p>Tu seras invité à rejoindre un groupe général puis en fonction de ton besoin, tu auras accès à d'autres groupes.</p>

      <h4>Télétravail</h4>
      <hr class="mb-2">
      <p>Lorsqu'une ressource souhaite se mettre en télétravail, elle doit envoyer un mail jusqu'à 48h avant le jour j pour s'assurer que tout le monde est ok</p>
      <p>Lorsqu'une ressource est en télétravail, pour participer au daily il suffit de rejoindre la réunion Skype qui débute à 9h30 dans le groupe général "Natural Solutions"</p>
      </ol>

      <h4>Congé</h4>
      <hr class="mb-2">
      <p>Lorsqu'une ressource veut prendre des congés il suffit de :
        <ol>
          <li>Demander si possible avec le chef de projet et les ressources possiblement concernées</li>
          <li>Remplir une feuille de congé</li>
          <li>La faire signer par le chef de projet</li>
          <li>La déposer sur le bureau de la RH</li>
          <li>Noter dans l'agenda la période du congé</li>
        </ol>
      </p>

      <h4>Github</h4>
      <hr class="mb-2">
      <p>Tous les projets sont hostés sur un Github propre à Natural Solutions, l'organisation est accessible <a class="" href='https://github.com/NaturalSolutions'>ici</a> attribué en fonction du besoin</p>

      <h4>Synolution</h4>
      <hr class="mb-2">
      <p>En plus du stockage Google Drive proposé avec ton compte Gmail, Natural Solutions possède un espace de stockage local accessible depuis l'extérieur <a class="" href='http://nastural-solutions.quickconnect.to/'>ici</a></p>

      <h4>Signature de mails</h4>
      <hr class="mb-2">
      <p>Il est possible d'avoir une signature de mail customisée spéciale Natural Solutions. Pour ce faire il suffit de : </p>
      <ol>
        <li>Cliquer <span id="ButtonMail" class="text-danger font-weight-bold pointer">ici</span></li>
        <li>Répondre aux questions</li>
        <li>Une fois la signature customisée, la sélectionner entièrement et la copier</li>
        <li>Se rendre dans ton application favorite de mails (gmail, etc..)</li>
        <li>La changer là-bas en collant la nouvelle</li>
      </ol>
      <p>Vous voilà avec une signature customisée spéciale Natural Solutions</p>
      <div class="LaSignatureDeMail p-3 mb-3" style="border: dotted;">

        <table>
          <tr>
              <th rowspan="5"><a href="http://www.natural-solutions.eu/"><img src="Assets/Image/MailFooter/Banner.png"></a></th>
              <td colspan="2"><span id="Name">Nom Prenom</span> <span id="Job"><i>Job</i></span></td>
          </tr>
          <tr>
              <td>
                  <a href="http://www.natural-solutions.eu/"><img src="Assets/Image/MailFooter/internet.png"></a>
              </td>
              <td>
                  <a href="http://www.natural-solutions.eu/">natural-solutions.eu</a>
              </td>
          </tr>
          <tr>
              <td>
                  <a href="tel:0491720026"><img src="Assets/Image/MailFooter/call.png"></a>
              </td>
              <td>
                  <a href="tel:+33491720026">04 91 72 00 26</a>
              </td>
          </tr>
          <tr>
              <td>
                  <a href="mailto:AdresseMail"><img src="Assets/Image/MailFooter/Mail.png"></a>
              </td>
              <td>
                  <a href="mailto:AdresseMail" id="Mail">AdresseMail</a>
              </td>
          </tr>
          <tr>
              <td>
                  <a href="https://goo.gl/maps/1X4TcrYwwi22"><img src="Assets/Image/MailFooter/map.png"></a>
              </td>
              <td>
                  <a href="https://goo.gl/maps/1X4TcrYwwi22">68 rue Sainte 13001 Marseille</a>
              </td>
          </tr>
      </table>

      </div>

      <h4>Ressources</h4>
      <hr class="mb-2">
      <small>Voici la liste des ressources actives, basée sur la base de données de l'application</small>
      <div class="border border-danger my-3 p-5">
        Chargement en cours..
      </div>

      <h4>Projets</h4>
      <hr class="mb-2">
      <small>Voici la liste des projets actifs, basée sur la base de données de l'application</small>
      <div class="border border-danger my-3 p-5 row" id="ListProjet">
      </div>

    </div>
  </div>

  <div id="ModaleInfoProjet" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Information du projet</h4>
        </div>
        <div class="modal-body" id="LaModaleInfoProjet">
        </div>
        <div class="modal-footer">
          <button  class="btn btn-dark" data-dismiss="modal">Fermer</button>
        </div>
      </div>
    </div>
  </div>

<script>
  $(document).ready(function () {

    $( "#ButtonMail" ).click(function() {
      
      var prenom = prompt("Ton prénom ?");
      var nom = prompt("Ton nom ?");
      var job = prompt("Ton poste ?");
      var email = prompt("Ton email ?",prenom+'_'+nom+'@natural-solutions.eu');
      window.alert("On est tout bon.. Quelques tours de magies et... voilà !");

      document.getElementById('Name').innerText = prenom + ' ' + nom
      document.getElementById('Job').innerText = job
      document.getElementById('Mail').innerText = email
      document.getElementById('Mail').href = 'mailto:'+email

    });

    $.ajax({
      url: "Modele/Bienvenue.php",
      method: "POST",
      data: {
        action: "ListeProjets"
      },
      dataType: "json",
      success: function (data) {
        console.log(data)
        $.each(data, function () {

          var toto = $('<div class="border col-3 text-center"></div>')

          var projet_pk = this.projet_pk
          $.get("Assets/Image/Projets/avatar_projet_"+projet_pk)
            .done(function() { 
                toto.prepend('<img class="img-fluid p-3" style="height:175px" src="Assets/Image/Projets/avatar_projet_'+projet_pk+'.png">')
            }).fail(function() { 
                toto.prepend('<img class="img-fluid p-3" style="height:175px" src="Assets/Image/Projets/default.png">')
          })         

          toto.append('<p class="text-center"><b>'+this.projet_nom+'</b></p>')
          toto.append('<p>'+this.projet_description+'</p>')

          toto.append('<button value="'+this.projet_pk+'" class="btn btn-success btn-block mb-3">Information</button>')

          var ResteDeLaDiv = $('<div id="Info_Projet_'+projet_pk+'" class="hideElement"></div>');
          ResteDeLaDiv.append('<span>Ressources mobilisée(s): </span>')
          var ressources = $('<ul></ul>')
          $.each(this.Ressource, function () {
            ressources.append('<li>'+this.user_prenom+' '+this.user_nom+'</li>')
          })
          ResteDeLaDiv.append(ressources)
          
          ResteDeLaDiv.append('<span>Client : </span>')
          var client = $('<ul></ul>')
          client.append('<li>Prénom : '+this.client_nom+'</li>')
          client.append('<li>Entreprise : '+this.client_entreprise+'</li>')
          client.append('<li>Job : '+this.client_job+'</li>')
          ResteDeLaDiv.append(client)

          toto.append(ResteDeLaDiv)

          $('#ListProjet').append(toto)
        })

      }
    });
  
    $(document).on('click', '.btn-block', function () {
      // alert(this.value)
      $('#ModaleInfoProjet').modal('show');
      console.log($('#Info_Projet_'+this.value))
      $('#LaModaleInfoProjet').html($('#Info_Projet_'+this.value).html());
    })

  })
</script>
